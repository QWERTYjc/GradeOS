apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: grading-system

resources:
  # Namespace
  - namespace.yaml
  
  # Configuration
  - configmap.yaml
  - secrets.yaml
  
  # Deployments
  - deployments/api-deployment.yaml
  - deployments/orchestration-worker-deployment.yaml
  - deployments/cognitive-worker-deployment.yaml
  - deployments/pod-disruption-budget.yaml
  
  # Services
  - services/ingress.yaml
  - services/network-policy.yaml
  - services/service-monitor.yaml
  
  # KEDA
  - keda/cognitive-worker-scaledobject.yaml

# Common labels applied to all resources
commonLabels:
  app.kubernetes.io/name: grading-system
  app.kubernetes.io/version: "0.1.0"
  app.kubernetes.io/managed-by: kustomize

# Images to be replaced (use with kustomize edit set image)
images:
  - name: your-registry/ai-grading-api
    newName: your-registry/ai-grading-api
    newTag: latest
  - name: your-registry/ai-grading-worker
    newName: your-registry/ai-grading-worker
    newTag: latest

# ConfigMap generator (optional)
# configMapGenerator:
#   - name: grading-config
#     literals:
#       - LOG_LEVEL=INFO

# Secret generator (optional, use with caution)
# secretGenerator:
#   - name: grading-secrets
#     literals:
#       - DATABASE_PASSWORD=changeme
