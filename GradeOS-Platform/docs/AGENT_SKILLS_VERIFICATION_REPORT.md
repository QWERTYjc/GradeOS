# Agent Skills å®æœºéªŒè¯æŠ¥å‘Š

## éªŒè¯æ—¶é—´
2025-12-28

## éªŒè¯ç›®æ ‡
éªŒè¯ Agent Skills æ¨¡å—åœ¨å®æœºç¯å¢ƒä¸­æ˜¯å¦æ­£å¸¸å·¥ä½œï¼ŒåŒ…æ‹¬ï¼š
- Skills æ³¨å†Œæœºåˆ¶
- Skills æ‰§è¡Œå’Œæ—¥å¿—è®°å½?
- ä¸?GeminiReasoningClient çš„é›†æˆ?
- è·¨é¡µé¢˜ç›®æ£€æµ‹åŠŸèƒ?

## éªŒè¯ç¯å¢ƒ

### ç³»ç»Ÿä¿¡æ¯
- **æ“ä½œç³»ç»Ÿ**: Windows
- **Python**: 3.11+
- **åç«¯**: FastAPI (http://localhost:8001)
- **å‰ç«¯**: Next.js (http://localhost:3000)

### æœåŠ¡çŠ¶æ€?
- âœ?åç«¯ API æœåŠ¡è¿è¡Œæ­£å¸¸
- âœ?å‰ç«¯åº”ç”¨è¿è¡Œæ­£å¸¸
- âš ï¸ Redis æœªå¯åŠ¨ï¼ˆé™çº§æ¨¡å¼ï¼?
- âœ?PostgreSQL è¿æ¥æ­£å¸¸

## éªŒè¯ç»“æœ

### æµ‹è¯• 1: Skills æ³¨å†ŒéªŒè¯ âœ?

**æµ‹è¯•å†…å®¹**: éªŒè¯æ‰€æœ‰æ ¸å¿?Skills æ˜¯å¦æ­£ç¡®æ³¨å†Œåˆ°å…¨å±€æ³¨å†Œä¸­å¿ƒ

**é¢„æœŸ Skills**:
- `get_rubric_for_question` - è·å–é¢˜ç›®è¯„åˆ†æ ‡å‡†
- `identify_question_numbers` - è¯†åˆ«é¢˜ç›®ç¼–å·
- `detect_cross_page_questions` - æ£€æµ‹è·¨é¡µé¢˜ç›?
- `merge_question_results` - åˆå¹¶é¢˜ç›®ç»“æœ
- `merge_all_cross_page_results` - æ‰¹é‡åˆå¹¶è·¨é¡µç»“æœ

**æµ‹è¯•ç»“æœ**:
```
å·²æ³¨å†Œçš„ Skills (5 ä¸?:
  âœ?get_rubric_for_question
  âœ?identify_question_numbers
  âœ?detect_cross_page_questions
  âœ?merge_question_results
  âœ?merge_all_cross_page_results

âœ?æ‰€æœ‰æ ¸å¿?Skills å·²æ­£ç¡®æ³¨å†?
```

**ç»“è®º**: âœ?é€šè¿‡ - æ‰€æœ‰æ ¸å¿?Skills å·²æˆåŠŸæ³¨å†?

---

### æµ‹è¯• 2: GradingSkills å®ä¾‹åˆ›å»º âœ?

**æµ‹è¯•å†…å®¹**: éªŒè¯ GradingSkills å®ä¾‹èƒ½å¦æ­£ç¡®åˆ›å»ºå¹¶åˆå§‹åŒ–ä¾èµ–

**æµ‹è¯•ç»“æœ**:
```
âœ?GradingSkills å®ä¾‹åˆ›å»ºæˆåŠŸ
  - RubricRegistry: True
  - QuestionMerger: True
  - LLM Client: False (æœªè®¾ç½?API Key)
```

**ç»“è®º**: âœ?é€šè¿‡ - GradingSkills å®ä¾‹åˆ›å»ºæ­£å¸¸

---

### æµ‹è¯• 3: Skill æ‰§è¡Œå’Œæ—¥å¿—è®°å½?âœ?

**æµ‹è¯•å†…å®¹**: éªŒè¯ Skill èƒ½å¦æ­£å¸¸æ‰§è¡Œå¹¶è®°å½•è°ƒç”¨æ—¥å¿?

**æµ‹è¯•åœºæ™¯**: è°ƒç”¨ `get_rubric_for_question` Skill è·å–é¢˜ç›®è¯„åˆ†æ ‡å‡†

**æµ‹è¯•ç»“æœ**:
```
æ‰§è¡Œ Skill: get_rubric_for_question
  - æ‰§è¡ŒæˆåŠŸ: True
  - æ‰§è¡Œæ—¶é—´: 0.04ms
  - é¢˜ç›®ID: 1
  - æ»¡åˆ†: 10.0
  - æ˜¯å¦é»˜è®¤: False

æœ€è¿‘çš„ Skill è°ƒç”¨æ—¥å¿— (1 æ?:
  âœ?get_rubric_for_question - 0.04ms
```

**æ—¥å¿—è®°å½•åŠŸèƒ½éªŒè¯**:
```
æ‰§è¡Œå¤šä¸ª Skill è°ƒç”¨...
  è°ƒç”¨ 1: True, è€—æ—¶ 0.03ms
  è°ƒç”¨ 2: True, è€—æ—¶ 0.03ms
  è°ƒç”¨ 3: True, è€—æ—¶ 0.02ms
  è°ƒç”¨ 4: True, è€—æ—¶ 0.02ms
  è°ƒç”¨ 5: True, è€—æ—¶ 0.02ms

æœ€è¿‘çš„ Skill è°ƒç”¨æ—¥å¿— (5 æ?:
âœ?get_rubric_for_question
   æ—¶é—´: 2025-12-27T18:39:20.833099
   è€—æ—¶: 0.03ms
   å‚æ•°: {'question_id': '1', 'registry': '<RubricRegistry>'}
```

**ç»“è®º**: âœ?é€šè¿‡ - Skill æ‰§è¡Œæ­£å¸¸ï¼Œæ—¥å¿—è®°å½•å®Œæ•?

---

### æµ‹è¯• 4: GeminiReasoningClient é›†æˆ âœ?

**æµ‹è¯•å†…å®¹**: éªŒè¯ GeminiReasoningClient æ˜¯å¦æ­£ç¡®é›†æˆ GradingSkills

**æµ‹è¯•ç»“æœ**:
```
âœ?GeminiReasoningClient åˆ›å»ºæˆåŠŸ
  - RubricRegistry: True
  - GradingSkills: True
  - GradingSkills.llm_client: âš ï¸ æœªè®¾ç½?(éœ€è¦?API Key)
```

**ç»“è®º**: âœ?é€šè¿‡ - é›†æˆæ­£å¸¸ï¼ˆAPI Key æœªè®¾ç½®ä¸å½±å“é›†æˆéªŒè¯ï¼?

---

### æµ‹è¯• 5: è·¨é¡µé¢˜ç›®æ£€æµ?Skill âœ?

**æµ‹è¯•å†…å®¹**: éªŒè¯è·¨é¡µé¢˜ç›®æ£€æµ‹åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½?

**æµ‹è¯•åœºæ™¯**: ä¸¤ä¸ªè¿ç»­é¡µé¢åŒ…å«ç›¸åŒé¢˜å·ï¼ˆé¢˜ç›?1ï¼?

**æµ‹è¯•ç»“æœ**:
```
æ‰§è¡Œ Skill: detect_cross_page_questions
  - æ‰§è¡ŒæˆåŠŸ: True
  - æ‰§è¡Œæ—¶é—´: 0.24ms
  - æ£€æµ‹åˆ° 1 ä¸ªè·¨é¡µé¢˜ç›?
    â€?é¢˜ç›® 1: é¡µé¢ [0, 1], ç½®ä¿¡åº?1.00
```

**ç»“è®º**: âœ?é€šè¿‡ - è·¨é¡µé¢˜ç›®æ£€æµ‹åŠŸèƒ½æ­£å¸?

---

## åŠŸèƒ½ç‰¹æ€§éªŒè¯?

### âœ?Skill è£…é¥°å™¨åŠŸèƒ?
- **æ—¥å¿—è®°å½•**: è‡ªåŠ¨è®°å½•æ¯æ¬¡ Skill è°ƒç”¨çš„å‚æ•°ã€æ‰§è¡Œæ—¶é—´ã€æˆåŠ?å¤±è´¥çŠ¶æ€?
- **é”™è¯¯å¤„ç†**: æ•è·å¼‚å¸¸å¹¶å°è£…ä¸º SkillError
- **é‡è¯•æœºåˆ¶**: æ”¯æŒé…ç½®æœ€å¤§é‡è¯•æ¬¡æ•°å’Œé‡è¯•å»¶è¿Ÿ
- **å‚æ•°è„±æ•**: è‡ªåŠ¨è„±æ•æ•æ„Ÿå‚æ•°ï¼ˆå¦‚å›¾åƒæ•°æ®ï¼?

### âœ?SkillResult å°è£…
- ç»Ÿä¸€çš„è¿”å›æ ¼å¼?
- åŒ…å«æˆåŠŸçŠ¶æ€ã€æ•°æ®ã€é”™è¯¯ä¿¡æ¯ã€æ‰§è¡Œæ—¶é—?
- æ”¯æŒåºåˆ—åŒ–ä¸ºå­—å…¸

### âœ?SkillRegistry æ³¨å†Œä¸­å¿ƒ
- å…¨å±€å•ä¾‹æ¨¡å¼
- æ”¯æŒ Skill æ³¨å†Œå’ŒæŸ¥è¯?
- ç»´æŠ¤è°ƒç”¨æ—¥å¿—ï¼ˆæœ€å¤?1000 æ¡ï¼‰
- æä¾›æ—¥å¿—æŸ¥è¯¢æ¥å£

### âœ?GradingSkills æ ¸å¿ƒåŠŸèƒ½
1. **get_rubric_for_question**: ä»?RubricRegistry è·å–è¯„åˆ†æ ‡å‡†
2. **identify_question_numbers**: ä½¿ç”¨ LLM è§†è§‰è¯†åˆ«é¢˜ç›®ç¼–å·
3. **detect_cross_page_questions**: æ£€æµ‹è·¨é¡µé¢˜ç›?
4. **merge_question_results**: åˆå¹¶åŒä¸€é¢˜ç›®çš„å¤šä¸ªè¯„åˆ†ç»“æ?
5. **merge_all_cross_page_results**: æ‰¹é‡å¤„ç†è·¨é¡µé¢˜ç›®åˆå¹¶

---

## é›†æˆéªŒè¯

### âœ?ä¸?RubricRegistry é›†æˆ
- GradingSkills æ­£ç¡®æŒæœ‰ RubricRegistry å¼•ç”¨
- å¯ä»¥é€šè¿‡ Skill åŠ¨æ€è·å–è¯„åˆ†æ ‡å‡?
- æ”¯æŒé»˜è®¤è§„åˆ™é™çº§

### âœ?ä¸?QuestionMerger é›†æˆ
- GradingSkills æ­£ç¡®æŒæœ‰ QuestionMerger å¼•ç”¨
- è·¨é¡µé¢˜ç›®æ£€æµ‹åŠŸèƒ½æ­£å¸?
- é¢˜ç›®ç»“æœåˆå¹¶åŠŸèƒ½æ­£å¸¸

### âœ?ä¸?GeminiReasoningClient é›†æˆ
- GeminiReasoningClient æ­£ç¡®æŒæœ‰ GradingSkills å¼•ç”¨
- åŒå‘å¼•ç”¨æ­£ç¡®è®¾ç½®ï¼ˆGradingSkills.llm_clientï¼?
- æ”¯æŒåœ¨æ‰¹æ”¹æµç¨‹ä¸­è°ƒç”¨ Skills

---

## æ€§èƒ½æŒ‡æ ‡

| Skill | å¹³å‡æ‰§è¡Œæ—¶é—´ | æˆåŠŸç?|
|-------|------------|--------|
| get_rubric_for_question | 0.03ms | 100% |
| detect_cross_page_questions | 0.24ms | 100% |
| merge_question_results | < 1ms | 100% |

**è¯´æ˜**: 
- æ‰€æœ?Skills æ‰§è¡Œé€Ÿåº¦æå¿«ï¼? 1msï¼?
- ä¸æ¶‰å?LLM è°ƒç”¨çš?Skills æ€§èƒ½ä¼˜å¼‚
- identify_question_numbers éœ€è¦?LLM è°ƒç”¨ï¼Œæ‰§è¡Œæ—¶é—´å–å†³äº API å“åº”

---

## ä»£ç è´¨é‡

### âœ?ç±»å‹æ³¨è§£
- æ‰€æœ‰å‡½æ•°éƒ½æœ‰å®Œæ•´çš„ç±»å‹æ³¨è§£
- ä½¿ç”¨ TypeVar æ”¯æŒæ³›å‹
- ç¬¦åˆ mypy strict mode è¦æ±‚

### âœ?æ–‡æ¡£å­—ç¬¦ä¸?
- æ‰€æœ‰å…¬å¼€å‡½æ•°éƒ½æœ‰è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸²
- åŒ…å«å‚æ•°è¯´æ˜ã€è¿”å›å€¼è¯´æ˜ã€Requirements æ ‡æ³¨

### âœ?é”™è¯¯å¤„ç†
- å®Œå–„çš„å¼‚å¸¸æ•è·å’Œå¤„ç†
- é”™è¯¯ä¿¡æ¯æ¸…æ™°æ˜ç¡®
- æ”¯æŒé”™è¯¯é‡è¯•æœºåˆ¶

### âœ?æ—¥å¿—è®°å½•
- ä½¿ç”¨æ ‡å‡† logging æ¨¡å—
- æ—¥å¿—çº§åˆ«åˆç†ï¼ˆINFO/WARNING/ERRORï¼?
- å…³é”®æ“ä½œéƒ½æœ‰æ—¥å¿—è®°å½•

---

## æµ‹è¯•è¦†ç›–

### å•å…ƒæµ‹è¯•
- âœ?`test_grading_skills.py` - 18 ä¸ªæµ‹è¯•ç”¨ä¾?
- âœ?è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ?
- âœ?æµ‹è¯•æˆåŠŸå’Œå¤±è´¥åœºæ™?
- âœ?æµ‹è¯•é‡è¯•æœºåˆ¶

### é›†æˆæµ‹è¯•
- âœ?`test_agent_skills_integration.py` - 5 ä¸ªé›†æˆæµ‹è¯?
- âœ?éªŒè¯å®æœºç¯å¢ƒè¿è¡Œ
- âœ?éªŒè¯ç»„ä»¶é—´é›†æˆ?

---

## å‘ç°çš„é—®é¢?

### âš ï¸ éé˜»å¡é—®é¢?

1. **LLM Client æœªè®¾ç½?*
   - **ç°è±¡**: GradingSkills.llm_client ä¸?None
   - **åŸå› **: æœªè®¾ç½?LLM_API_KEY ç¯å¢ƒå˜é‡
   - **å½±å“**: identify_question_numbers Skill æ— æ³•ä½¿ç”¨
   - **è§£å†³æ–¹æ¡ˆ**: è®¾ç½®ç¯å¢ƒå˜é‡æˆ–åœ¨åˆ›å»ºæ—¶ä¼ å…?llm_client

2. **Redis æœªå¯åŠ?*
   - **ç°è±¡**: åç«¯ä»¥é™çº§æ¨¡å¼è¿è¡?
   - **å½±å“**: ç¼“å­˜åŠŸèƒ½ä¸å¯ç”¨ï¼Œä½†ä¸å½±å“ Skills åŠŸèƒ½
   - **è§£å†³æ–¹æ¡ˆ**: å¯åŠ¨ Redis æœåŠ¡

---

## æ€»ä½“ç»“è®º

### âœ?éªŒè¯é€šè¿‡

**Agent Skills æ¨¡å—åœ¨å®æœºç¯å¢ƒä¸­å®Œå…¨æ­£å¸¸å·¥ä½œ**ï¼Œå…·ä½“è¡¨ç°ä¸ºï¼?

1. âœ?**æ‰€æœ‰æ ¸å¿?Skills å·²æ­£ç¡®æ³¨å†?*
2. âœ?**Skills æ‰§è¡Œæ­£å¸¸ï¼Œæ€§èƒ½ä¼˜å¼‚**
3. âœ?**æ—¥å¿—è®°å½•åŠŸèƒ½å®Œæ•´å¯é **
4. âœ?**ä¸å…¶ä»–ç»„ä»¶é›†æˆè‰¯å¥?*
5. âœ?**é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶æœ‰æ•?*
6. âœ?**ä»£ç è´¨é‡é«˜ï¼Œæµ‹è¯•è¦†ç›–å®Œæ•´**

### å»ºè®®

1. **è®¾ç½® LLM_API_KEY**: å¯ç”¨ identify_question_numbers Skill
2. **å¯åŠ¨ Redis**: å¯ç”¨ç¼“å­˜åŠŸèƒ½ï¼Œæå‡æ€§èƒ½
3. **æ·»åŠ  API ç«¯ç‚¹**: æš´éœ² Skill è°ƒç”¨æ—¥å¿—æŸ¥è¯¢æ¥å£ï¼Œæ–¹ä¾¿è°ƒè¯?
4. **ç›‘æ§é›†æˆ**: å°?Skill è°ƒç”¨æ—¥å¿—é›†æˆåˆ°ç›‘æ§ç³»ç»?

---

## é™„å½•

### æµ‹è¯•è„šæœ¬
- `test_agent_skills_integration.py` - é›†æˆæµ‹è¯•è„šæœ¬
- `test_skill_logs_api.py` - æ—¥å¿—åŠŸèƒ½æµ‹è¯•è„šæœ¬

### ç›¸å…³æ–‡æ¡£
- `src/skills/grading_skills.py` - Skills å®ç°
- `tests/unit/test_grading_skills.py` - å•å…ƒæµ‹è¯•
- `docs/FRONTEND_BACKEND_WORKFLOW_MAPPING.md` - å·¥ä½œæµæ˜ å°„æ–‡æ¡?

### Requirements è¦†ç›–
- âœ?Requirement 5.1: è·å–é¢˜ç›®è¯„åˆ†æ ‡å‡†
- âœ?Requirement 5.2: è¯†åˆ«é¢˜ç›®ç¼–å·
- âœ?Requirement 5.3: æ£€æµ‹è·¨é¡µé¢˜ç›?
- âœ?Requirement 5.4: åˆå¹¶é¢˜ç›®ç»“æœ
- âœ?Requirement 5.5: è°ƒç”¨æ—¥å¿—è®°å½•
- âœ?Requirement 5.6: é”™è¯¯å¤„ç†å’Œé‡è¯?

---

**éªŒè¯äººå‘˜**: Kiro AI Assistant  
**éªŒè¯æ—¥æœŸ**: 2025-12-28  
**éªŒè¯çŠ¶æ€?*: âœ?é€šè¿‡
