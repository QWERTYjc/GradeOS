# GradeOS å¤šäºº Vibe Coding åä½œæŒ‡å—

> é¢å‘ AI è¾…åŠ©å¼€å‘çš„å›¢é˜Ÿåä½œèŒƒå¼ä¸æ¶æ„ä¼˜åŒ–å»ºè®®

## ğŸ“‹ ç›®å½•

- [Vibe Coding æ¦‚è¿°](#vibe-coding-æ¦‚è¿°)
- [é¡¹ç›®æ¨¡å—åˆ’åˆ†](#é¡¹ç›®æ¨¡å—åˆ’åˆ†)
- [åä½œå·¥ä½œæµ](#åä½œå·¥ä½œæµ)
- [æ¶æ„ä¼˜åŒ–å»ºè®®](#æ¶æ„ä¼˜åŒ–å»ºè®®)
- [AI è¾…åŠ©å¼€å‘æœ€ä½³å®è·µ](#ai-è¾…åŠ©å¼€å‘æœ€ä½³å®è·µ)
- [ä»£ç è´¨é‡ä¿éšœ](#ä»£ç è´¨é‡ä¿éšœ)

---

## Vibe Coding æ¦‚è¿°

### ä»€ä¹ˆæ˜¯ Vibe Codingï¼Ÿ

Vibe Coding æ˜¯ä¸€ç§ä»¥ AI ä¸ºæ ¸å¿ƒè¾…åŠ©å·¥å…·çš„åä½œå¼€å‘èŒƒå¼ï¼Œå¼ºè°ƒï¼š

1. **æ„å›¾é©±åŠ¨** - ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼ŒAI ç”Ÿæˆä»£ç 
2. **å¿«é€Ÿè¿­ä»£** - é€šè¿‡å¯¹è¯å¼äº¤äº’å¿«é€ŸåŸå‹å’Œä¿®æ”¹
3. **å¹¶è¡Œå¼€å‘** - å¤šäººåŒæ—¶åœ¨ä¸åŒæ¨¡å—å·¥ä½œï¼ŒAI åè°ƒæ•´åˆ
4. **çŸ¥è¯†å…±äº«** - AI ä½œä¸ºå›¢é˜ŸçŸ¥è¯†åº“ï¼Œä¿æŒä¸Šä¸‹æ–‡ä¸€è‡´æ€§

### ä¸ºä»€ä¹ˆé€‚åˆ GradeOSï¼Ÿ

GradeOS æ•´åˆäº†å››ä¸ªç‹¬ç«‹é¡¹ç›®ï¼Œå¤©ç„¶å…·æœ‰æ¨¡å—åŒ–ç‰¹æ€§ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GradeOS Platform                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AI æ‰¹æ”¹    â”‚  æ•™å¸ˆç®¡ç†   â”‚  å­¦ç”ŸåŠ©æ‰‹   â”‚  é”™é¢˜åˆ†æ           â”‚
â”‚  (æ‰¹æ”¹/)    â”‚  (GradeOS-  â”‚  (student-  â”‚  (intellilearn/)    â”‚
â”‚             â”‚  frontend/) â”‚  assisant/) â”‚                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ç»Ÿä¸€ API å±‚ + å…±äº«ç»„ä»¶                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é¡¹ç›®æ¨¡å—åˆ’åˆ†

### æ¨èçš„å›¢é˜Ÿåˆ†å·¥

| è§’è‰² | è´Ÿè´£æ¨¡å— | ä¸»è¦æ–‡ä»¶ | æŠ€èƒ½è¦æ±‚ |
|------|----------|----------|----------|
| **åç«¯å¼€å‘ A** | ç»Ÿä¸€ API + æ•°æ®åº“ | `backend/src/api/routes/unified_api.py`<br>`backend/src/models/unified_models.py` | Python, FastAPI, PostgreSQL |
| **åç«¯å¼€å‘ B** | AI æ‰¹æ”¹å¼•æ“ | `backend/src/agents/`<br>`backend/src/graphs/`<br>`backend/src/services/` | Python, LangGraph, Gemini API |
| **å‰ç«¯å¼€å‘ A** | æ•™å¸ˆæ¨¡å— | `frontend/src/app/teacher/`<br>`frontend/src/components/` | React, Next.js, TypeScript |
| **å‰ç«¯å¼€å‘ B** | å­¦ç”Ÿæ¨¡å— | `frontend/src/app/student/`<br>`frontend/src/services/api.ts` | React, Next.js, Recharts |
| **å‰ç«¯å¼€å‘ C** | æ‰¹æ”¹æ§åˆ¶å° | `frontend/src/app/console/`<br>`frontend/src/store/consoleStore.ts` | React, WebSocket, åŠ¨ç”» |
| **å…¨æ ˆ/æ¶æ„** | é›†æˆ + DevOps | `docker-compose.yml`<br>CI/CD é…ç½® | Docker, K8s, ç³»ç»Ÿè®¾è®¡ |

### æ¨¡å—è¾¹ç•Œå®šä¹‰

```yaml
# æ¨¡å—ä¾èµ–å…³ç³»
modules:
  unified_api:
    owner: backend-a
    dependencies: []
    exports:
      - /api/auth/*
      - /api/class/*
      - /api/homework/*
      - /api/v1/analysis/*
      - /api/teacher/statistics/*

  grading_engine:
    owner: backend-b
    dependencies: [unified_api]
    exports:
      - /submissions/*
      - /batch/*
      - /rubrics/*

  teacher_frontend:
    owner: frontend-a
    dependencies: [unified_api]
    pages:
      - /teacher/dashboard
      - /teacher/homework
      - /teacher/statistics
      - /teacher/class/[id]

  student_frontend:
    owner: frontend-b
    dependencies: [unified_api]
    pages:
      - /student/dashboard
      - /student/assistant
      - /student/analysis
      - /student/report

  console_frontend:
    owner: frontend-c
    dependencies: [grading_engine]
    pages:
      - /console
```

---

## åä½œå·¥ä½œæµ

### 1. ä»»åŠ¡åˆ†é…æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éœ€æ±‚æ–‡æ¡£   â”‚â”€â”€â”€â”€â–¶â”‚  AI åˆ†è§£    â”‚â”€â”€â”€â”€â–¶â”‚  ä»»åŠ¡åˆ†é…   â”‚
â”‚  (PRD)      â”‚     â”‚  ä»»åŠ¡       â”‚     â”‚  (Jira/     â”‚
â”‚             â”‚     â”‚             â”‚     â”‚  Linear)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                       â”‚                                       â”‚
       â–¼                                       â–¼                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼€å‘è€… A   â”‚                         â”‚  å¼€å‘è€… B   â”‚                         â”‚  å¼€å‘è€… C   â”‚
â”‚  + AI åŠ©æ‰‹  â”‚                         â”‚  + AI åŠ©æ‰‹  â”‚                         â”‚  + AI åŠ©æ‰‹  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                       â”‚                                       â”‚
       â–¼                                       â–¼                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Feature    â”‚                         â”‚  Feature    â”‚                         â”‚  Feature    â”‚
â”‚  Branch A   â”‚                         â”‚  Branch B   â”‚                         â”‚  Branch C   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                       â”‚                                       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚  PR Review  â”‚
                                        â”‚  + AI æ£€æŸ¥  â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚   Merge     â”‚
                                        â”‚   develop   â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. AI è¾…åŠ©å¼€å‘ä¼šè¯æ¨¡æ¿

æ¯ä¸ªå¼€å‘è€…åœ¨å¼€å§‹å·¥ä½œæ—¶ï¼Œåº”å‘ AI æä¾›ä¸Šä¸‹æ–‡ï¼š

```markdown
## ä¼šè¯ä¸Šä¸‹æ–‡

**é¡¹ç›®**: GradeOS Platform
**æ¨¡å—**: [ä½ è´Ÿè´£çš„æ¨¡å—]
**å½“å‰ä»»åŠ¡**: [ä»»åŠ¡æè¿°]

**ç›¸å…³æ–‡ä»¶**:
- `path/to/file1.ts`
- `path/to/file2.py`

**æ¥å£çº¦å®š**:
- API åŸºç¡€è·¯å¾„: `/api`
- è®¤è¯æ–¹å¼: JWT Token
- å“åº”æ ¼å¼: `{ data, error, message }`

**æ³¨æ„äº‹é¡¹**:
- éµå¾ªç°æœ‰ä»£ç é£æ ¼
- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- æ·»åŠ ä¸­æ–‡æ³¨é‡Š
```

### 3. æ¥å£åå•†æµç¨‹

å½“æ¨¡å—é—´éœ€è¦æ–°æ¥å£æ—¶ï¼š

```
1. éœ€æ±‚æ–¹åœ¨ `docs/api-proposals/` åˆ›å»ºææ¡ˆ
2. AI è¾…åŠ©ç”Ÿæˆæ¥å£å®šä¹‰ (OpenAPI/TypeScript)
3. ç›¸å…³å¼€å‘è€… Review
4. åˆå¹¶åˆ° `docs/api-contracts/`
5. å„æ–¹æŒ‰å¥‘çº¦å®ç°
```

**æ¥å£ææ¡ˆæ¨¡æ¿** (`docs/api-proposals/xxx.md`):

```markdown
# æ¥å£ææ¡ˆ: [åŠŸèƒ½åç§°]

## èƒŒæ™¯
[ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ¥å£]

## æ¥å£å®šä¹‰

### Request
```typescript
POST /api/xxx
Content-Type: application/json

{
  "field1": string,
  "field2": number
}
```

### Response
```typescript
{
  "data": {
    "id": string,
    "result": object
  },
  "error": null
}
```

## å½±å“èŒƒå›´
- å‰ç«¯: `frontend/src/services/api.ts`
- åç«¯: `backend/src/api/routes/xxx.py`

## æ—¶é—´çº¿
- ææ¡ˆ: 2024-12-25
- è¯„å®¡: 2024-12-26
- å®ç°: 2024-12-27
```


---

## æ¶æ„ä¼˜åŒ–å»ºè®®

### 1. åç«¯æ¶æ„ä¼˜åŒ–

#### 1.1 API å±‚ä¼˜åŒ–

**å½“å‰çŠ¶æ€**: å•ä¸€ `unified_api.py` æ–‡ä»¶åŒ…å«æ‰€æœ‰è·¯ç”±

**ä¼˜åŒ–æ–¹æ¡ˆ**: æŒ‰é¢†åŸŸæ‹†åˆ†

```
backend/src/api/routes/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ auth.py           # è®¤è¯ç›¸å…³
â”œâ”€â”€ classes.py        # ç­çº§ç®¡ç†
â”œâ”€â”€ homework.py       # ä½œä¸šç®¡ç†
â”œâ”€â”€ analysis.py       # é”™é¢˜åˆ†æ
â”œâ”€â”€ statistics.py     # ç»Ÿè®¡åˆ†æ
â””â”€â”€ grading.py        # AI æ‰¹æ”¹ (å·²æœ‰)
```

**å®æ–½æ­¥éª¤**:

```python
# backend/src/api/routes/__init__.py
from .auth import router as auth_router
from .classes import router as classes_router
from .homework import router as homework_router
from .analysis import router as analysis_router
from .statistics import router as statistics_router

__all__ = [
    "auth_router",
    "classes_router", 
    "homework_router",
    "analysis_router",
    "statistics_router",
]
```

#### 1.2 æœåŠ¡å±‚ä¼˜åŒ–

**å¼•å…¥ Repository æ¨¡å¼**:

```python
# backend/src/repositories/class_repository.py
class ClassRepository:
    def __init__(self, db: Database):
        self.db = db
    
    async def get_by_id(self, class_id: str) -> Optional[Class]:
        async with self.db.connection() as conn:
            result = await conn.execute(
                "SELECT * FROM classes WHERE class_id = %s",
                (class_id,)
            )
            return Class(**result) if result else None
    
    async def get_by_teacher(self, teacher_id: str) -> List[Class]:
        ...

# backend/src/services/class_service.py
class ClassService:
    def __init__(self, repo: ClassRepository, cache: CacheService):
        self.repo = repo
        self.cache = cache
    
    async def get_teacher_classes(self, teacher_id: str) -> List[Class]:
        # å…ˆæŸ¥ç¼“å­˜
        cached = await self.cache.get(f"teacher:{teacher_id}:classes")
        if cached:
            return cached
        
        # æŸ¥æ•°æ®åº“
        classes = await self.repo.get_by_teacher(teacher_id)
        
        # å†™ç¼“å­˜
        await self.cache.set(f"teacher:{teacher_id}:classes", classes, ttl=300)
        
        return classes
```

#### 1.3 ä¾èµ–æ³¨å…¥ä¼˜åŒ–

```python
# backend/src/api/dependencies.py
from functools import lru_cache

@lru_cache()
def get_class_repository() -> ClassRepository:
    return ClassRepository(db)

@lru_cache()
def get_class_service() -> ClassService:
    return ClassService(
        repo=get_class_repository(),
        cache=get_cache_service()
    )

# åœ¨è·¯ç”±ä¸­ä½¿ç”¨
@router.get("/teacher/classes")
async def get_teacher_classes(
    teacher_id: str,
    service: ClassService = Depends(get_class_service)
):
    return await service.get_teacher_classes(teacher_id)
```

### 2. å‰ç«¯æ¶æ„ä¼˜åŒ–

#### 2.1 API å±‚ä¼˜åŒ–

**å½“å‰çŠ¶æ€**: å•ä¸€ `api.ts` æ–‡ä»¶

**ä¼˜åŒ–æ–¹æ¡ˆ**: æŒ‰é¢†åŸŸæ‹†åˆ† + React Query

```
frontend/src/services/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ client.ts         # åŸºç¡€è¯·æ±‚å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ auth.ts           # è®¤è¯ API
â”‚   â”œâ”€â”€ classes.ts        # ç­çº§ API
â”‚   â”œâ”€â”€ homework.ts       # ä½œä¸š API
â”‚   â”œâ”€â”€ analysis.ts       # é”™é¢˜åˆ†æ API
â”‚   â””â”€â”€ index.ts          # ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.ts        # è®¤è¯ hooks
â”‚   â”œâ”€â”€ useClasses.ts     # ç­çº§ hooks
â”‚   â”œâ”€â”€ useHomework.ts    # ä½œä¸š hooks
â”‚   â””â”€â”€ useAnalysis.ts    # åˆ†æ hooks
â””â”€â”€ index.ts
```

**ç¤ºä¾‹å®ç°**:

```typescript
// frontend/src/services/api/client.ts
import { QueryClient } from '@tanstack/react-query';

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿ
      retry: 1,
    },
  },
});

export async function apiClient<T>(
  endpoint: string,
  options?: RequestInit
): Promise<T> {
  const response = await fetch(`${API_BASE}${endpoint}`, {
    headers: {
      'Content-Type': 'application/json',
      Authorization: `Bearer ${getToken()}`,
      ...options?.headers,
    },
    ...options,
  });
  
  if (!response.ok) {
    throw new ApiError(response.status, await response.json());
  }
  
  return response.json();
}

// frontend/src/services/hooks/useClasses.ts
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';

export function useTeacherClasses(teacherId: string) {
  return useQuery({
    queryKey: ['classes', 'teacher', teacherId],
    queryFn: () => classApi.getTeacherClasses(teacherId),
    enabled: !!teacherId,
  });
}

export function useCreateClass() {
  const queryClient = useQueryClient();
  
  return useMutation({
    mutationFn: classApi.createClass,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['classes'] });
    },
  });
}
```

#### 2.2 çŠ¶æ€ç®¡ç†ä¼˜åŒ–

**å½“å‰çŠ¶æ€**: Zustand å•ä¸€ store

**ä¼˜åŒ–æ–¹æ¡ˆ**: æŒ‰é¢†åŸŸæ‹†åˆ† + æŒä¹…åŒ–

```typescript
// frontend/src/store/index.ts
import { create } from 'zustand';
import { persist, devtools } from 'zustand/middleware';

// è®¤è¯ Store
export const useAuthStore = create<AuthState>()(
  devtools(
    persist(
      (set) => ({
        user: null,
        token: null,
        login: async (credentials) => { ... },
        logout: () => set({ user: null, token: null }),
      }),
      { name: 'auth-storage' }
    )
  )
);

// UI Store (ä¸æŒä¹…åŒ–)
export const useUIStore = create<UIState>((set) => ({
  sidebarOpen: true,
  theme: 'light',
  toggleSidebar: () => set((s) => ({ sidebarOpen: !s.sidebarOpen })),
}));
```

#### 2.3 ç»„ä»¶æ¶æ„ä¼˜åŒ–

**å¼•å…¥ Feature-Sliced Design**:

```
frontend/src/
â”œâ”€â”€ app/                    # Next.js App Router
â”œâ”€â”€ features/               # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ classes/
â”‚   â”œâ”€â”€ homework/
â”‚   â””â”€â”€ analysis/
â”œâ”€â”€ shared/                 # å…±äº«èµ„æº
â”‚   â”œâ”€â”€ ui/                 # åŸºç¡€ UI ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ config/             # é…ç½®
â””â”€â”€ widgets/                # ç»„åˆç»„ä»¶
    â”œâ”€â”€ DashboardLayout/
    â””â”€â”€ DataTable/
```

### 3. æ•°æ®åº“ä¼˜åŒ–

#### 3.1 è¯»å†™åˆ†ç¦»

```yaml
# docker-compose.prod.yml
services:
  postgres-primary:
    image: postgres:15
    environment:
      POSTGRES_REPLICATION_MODE: master
    
  postgres-replica:
    image: postgres:15
    environment:
      POSTGRES_REPLICATION_MODE: slave
      POSTGRES_MASTER_HOST: postgres-primary
```

```python
# backend/src/utils/database.py
class Database:
    def __init__(self):
        self.write_pool = AsyncConnectionPool(WRITE_DB_URL)
        self.read_pool = AsyncConnectionPool(READ_DB_URL)
    
    @asynccontextmanager
    async def read_connection(self):
        async with self.read_pool.connection() as conn:
            yield conn
    
    @asynccontextmanager
    async def write_connection(self):
        async with self.write_pool.connection() as conn:
            yield conn
```

#### 3.2 ç¼“å­˜ç­–ç•¥ä¼˜åŒ–

```python
# backend/src/services/cache.py
class CacheService:
    """å¤šçº§ç¼“å­˜æœåŠ¡"""
    
    def __init__(self, redis: Redis):
        self.redis = redis
        self.local_cache = TTLCache(maxsize=1000, ttl=60)
    
    async def get(self, key: str) -> Optional[Any]:
        # L1: æœ¬åœ°ç¼“å­˜
        if key in self.local_cache:
            return self.local_cache[key]
        
        # L2: Redis
        value = await self.redis.get(key)
        if value:
            self.local_cache[key] = value
            return value
        
        return None
    
    async def set(self, key: str, value: Any, ttl: int = 300):
        self.local_cache[key] = value
        await self.redis.setex(key, ttl, value)
```

---

## AI è¾…åŠ©å¼€å‘æœ€ä½³å®è·µ

### 1. Prompt å·¥ç¨‹

#### ä»£ç ç”Ÿæˆ Prompt æ¨¡æ¿

```markdown
## ä»»åŠ¡
[å…·ä½“ä»»åŠ¡æè¿°]

## ä¸Šä¸‹æ–‡
- é¡¹ç›®: GradeOS Platform
- è¯­è¨€: [Python/TypeScript]
- æ¡†æ¶: [FastAPI/Next.js]

## ç›¸å…³ä»£ç 
```[language]
[ç°æœ‰ç›¸å…³ä»£ç ]
```

## è¦æ±‚
1. éµå¾ªç°æœ‰ä»£ç é£æ ¼
2. æ·»åŠ ç±»å‹æ³¨è§£
3. åŒ…å«é”™è¯¯å¤„ç†
4. æ·»åŠ ä¸­æ–‡æ³¨é‡Š

## è¾“å‡ºæ ¼å¼
åªè¾“å‡ºä»£ç ï¼Œä¸éœ€è¦è§£é‡Š
```

#### Code Review Prompt æ¨¡æ¿

```markdown
## è¯·å®¡æŸ¥ä»¥ä¸‹ä»£ç 

```[language]
[å¾…å®¡æŸ¥ä»£ç ]
```

## å®¡æŸ¥è¦ç‚¹
1. ä»£ç è´¨é‡å’Œå¯è¯»æ€§
2. æ½œåœ¨çš„ bug æˆ–è¾¹ç•Œæƒ…å†µ
3. æ€§èƒ½é—®é¢˜
4. å®‰å…¨æ¼æ´
5. æ˜¯å¦ç¬¦åˆé¡¹ç›®è§„èŒƒ

## è¾“å‡ºæ ¼å¼
- é—®é¢˜åˆ—è¡¨ (æŒ‰ä¸¥é‡ç¨‹åº¦æ’åº)
- æ”¹è¿›å»ºè®®
- ä¼˜åŒ–åçš„ä»£ç  (å¦‚éœ€è¦)
```

### 2. ä¸Šä¸‹æ–‡ç®¡ç†

#### é¡¹ç›®çº§ Steering æ–‡ä»¶

åˆ›å»º `.kiro/steering/project-context.md`:

```markdown
---
inclusion: always
---

# GradeOS é¡¹ç›®ä¸Šä¸‹æ–‡

## æŠ€æœ¯æ ˆ
- åç«¯: Python 3.11+, FastAPI, LangGraph, PostgreSQL, Redis
- å‰ç«¯: Next.js 15, React 19, TypeScript, Tailwind CSS, Zustand

## ä»£ç è§„èŒƒ
- Python: Black æ ¼å¼åŒ–, ç±»å‹æ³¨è§£å¿…é¡»
- TypeScript: ä¸¥æ ¼æ¨¡å¼, ESLint + Prettier
- æäº¤ä¿¡æ¯: Conventional Commits

## API çº¦å®š
- åŸºç¡€è·¯å¾„: `/api`
- è®¤è¯: JWT Bearer Token
- å“åº”æ ¼å¼: `{ data, error, message }`

## æ•°æ®åº“
- 19 å¼ æ ¸å¿ƒè¡¨ï¼Œè¯¦è§ `åç«¯æ•°æ®åº“éœ€æ±‚æ–‡æ¡£_åŸºäºAPIæ•´åˆ.md`
- ä½¿ç”¨ PostgreSQL JSONB å­˜å‚¨çµæ´»æ•°æ®
```

### 3. åä½œ AI ä¼šè¯

#### è·¨æ¨¡å—åä½œç¤ºä¾‹

**åœºæ™¯**: å‰ç«¯éœ€è¦æ–°çš„ API æ¥å£

```markdown
## ä¼šè¯ 1 (å‰ç«¯å¼€å‘è€…)

æˆ‘éœ€è¦ä¸€ä¸ªè·å–å­¦ç”Ÿé”™é¢˜ç»Ÿè®¡çš„æ¥å£ï¼Œç”¨äºå­¦æƒ…æŠ¥å‘Šé¡µé¢ã€‚

éœ€è¦çš„æ•°æ®:
- å„ç§‘ç›®é”™é¢˜æ•°é‡
- é”™è¯¯ç±»å‹åˆ†å¸ƒ
- è¿‘30å¤©è¶‹åŠ¿

è¯·å¸®æˆ‘:
1. è®¾è®¡æ¥å£è¯·æ±‚/å“åº”æ ¼å¼
2. ç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰
3. ç”Ÿæˆ API è°ƒç”¨å‡½æ•°
```

```markdown
## ä¼šè¯ 2 (åç«¯å¼€å‘è€…)

å‰ç«¯éœ€è¦ä»¥ä¸‹æ¥å£ï¼Œè¯·å¸®æˆ‘å®ç°:

æ¥å£: GET /api/v1/student/{student_id}/error-statistics
å“åº”:
```typescript
{
  by_subject: { [subject: string]: number },
  by_error_type: { [type: string]: number },
  trend_30d: { date: string, count: number }[]
}
```

è¦æ±‚:
1. ä½¿ç”¨ç°æœ‰çš„ error_records è¡¨
2. æ·»åŠ  Redis ç¼“å­˜ (TTL 10åˆ†é’Ÿ)
3. éµå¾ªç°æœ‰ä»£ç é£æ ¼
```

---

## ä»£ç è´¨é‡ä¿éšœ

### 1. è‡ªåŠ¨åŒ–æ£€æŸ¥

```yaml
# .github/workflows/ci.yml
name: CI

on: [push, pull_request]

jobs:
  backend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: Install dependencies
        run: |
          cd backend
          pip install -r requirements.txt
          pip install black isort flake8 pytest
      
      - name: Lint
        run: |
          cd backend
          black --check src/
          isort --check src/
          flake8 src/
      
      - name: Test
        run: |
          cd backend
          pytest tests/ -v

  frontend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: |
          cd frontend
          npm ci
      
      - name: Lint
        run: |
          cd frontend
          npm run lint
      
      - name: Type check
        run: |
          cd frontend
          npm run type-check
      
      - name: Test
        run: |
          cd frontend
          npm test
```

### 2. Pre-commit Hooks

```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/psf/black
    rev: 23.12.1
    hooks:
      - id: black
        files: ^backend/

  - repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort
        files: ^backend/

  - repo: https://github.com/pre-commit/mirrors-eslint
    rev: v8.56.0
    hooks:
      - id: eslint
        files: ^frontend/.*\.[jt]sx?$
        additional_dependencies:
          - eslint@8.56.0
          - typescript
```

### 3. AI è¾…åŠ© Code Review

åœ¨ PR æè¿°ä¸­æ·»åŠ :

```markdown
## AI Review Checklist

- [ ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- [ ] æ·»åŠ äº†å¿…è¦çš„ç±»å‹æ³¨è§£
- [ ] åŒ…å«é”™è¯¯å¤„ç†
- [ ] æœ‰é€‚å½“çš„æµ‹è¯•è¦†ç›–
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£

## AI å®¡æŸ¥ç»“æœ

[ç²˜è´´ AI å®¡æŸ¥è¾“å‡º]
```

---

## æ€»ç»“

### Vibe Coding æˆåŠŸè¦ç´ 

1. **æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œ** - å‡å°‘å†²çªï¼Œæé«˜å¹¶è¡Œåº¦
2. **ç»Ÿä¸€çš„æ¥å£å¥‘çº¦** - API å…ˆè¡Œï¼Œå‰åç«¯è§£è€¦
3. **ä¸€è‡´çš„ä¸Šä¸‹æ–‡** - Steering æ–‡ä»¶ + é¡¹ç›®æ–‡æ¡£
4. **è‡ªåŠ¨åŒ–è´¨é‡ä¿éšœ** - CI/CD + Pre-commit
5. **æœ‰æ•ˆçš„ AI åä½œ** - ç»“æ„åŒ– Prompt + ä¸Šä¸‹æ–‡ç®¡ç†

### æ¨èå·¥å…·é“¾

| ç”¨é€” | å·¥å…· |
|------|------|
| AI è¾…åŠ©å¼€å‘ | Kiro, Cursor, GitHub Copilot |
| ä»»åŠ¡ç®¡ç† | Linear, Jira |
| æ–‡æ¡£åä½œ | Notion, Confluence |
| API è®¾è®¡ | Swagger, Postman |
| ä»£ç å®¡æŸ¥ | GitHub PR, GitLab MR |
| ç›‘æ§å‘Šè­¦ | Sentry, Datadog |

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*æœ€åæ›´æ–°: 2024-12-25*
